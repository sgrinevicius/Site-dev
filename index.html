<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
	<style>
		body {font-family: Arial;}
		table {
		  font-family: arial, sans-serif;
		  border-collapse: collapse;
		  width: 100%;
		}

		td, th {
		  border: 1px solid #dddddd;
		  text-align: left;
		  padding: 8px;
		}

		tr:nth-child(even) {
		  background-color: #dddddd;
		}
	</style>
</head>
<body>

<script>
function getModbusData() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) 
	{
	  var obj = JSON.parse(this.responseText);	  
      document.getElementById("total_kwh").innerHTML = obj.modbus[0].total_kwh;
	  document.getElementById("export_kwh").innerHTML = obj.modbus[0].export_kwh;
	  document.getElementById("import_kwh").innerHTML = obj.modbus[0].import_kwh;
	  document.getElementById("voltage").innerHTML = obj.modbus[0].voltage;
	  document.getElementById("current").innerHTML = obj.modbus[0].current;
	  document.getElementById("a_power").innerHTML = obj.modbus[0].a_power;
	  document.getElementById("r_power").innerHTML = obj.modbus[0].r_power;
	  document.getElementById("p_factor").innerHTML = obj.modbus[0].p_factor;
	  document.getElementById("frequency").innerHTML = obj.modbus[0].frequency;
      document.getElementById("dtime").innerHTML = new Date();
    }
  };
  xhttp.open("GET", "readmb", true);
  xhttp.send();
}
setInterval(function() 
{
  getModbusData();
}, 5000);
</script>

<div align="center"
<img src="logo.png" alt="logo" width="150" height="40"/> 
</div>

<table >
	<tr><td width="20%"><div>Energia Total [kWh]: <span id="total_kwh"></span></div></td></tr>
	<tr><td width="20%"><div>Energia Exportada [kWh]: <span id="export_kwh"></span></div></td></tr>
	<tr><td width="20%"><div>Energia Importada [kWh]: <span id="import_kwh"></span></div></td></tr>
	<tr><td width="20%"><div>Tensão Fase-Neutro [V]: <span id="voltage"></span></div></td></tr>
	<tr><td width="20%"><div>Corrente de Fase [A]: <span id="current"></span></div></td></tr>
	<tr><td width="20%"><div>Potência Ativa [kW]: <span id="a_power"></span></div></td></tr>
	<tr><td width="20%"><div>Potência Reativa [kvar]: <span id="r_power"></span></div></td></tr>
	<tr><td width="20%"><div>Fator de Potência: <span id="p_factor"></span></div></td></tr>
	<tr><td width="20%"><div>Frequência [Hz]: <span id="frequency"></span></div></td></tr>
	<tr><td width="20%"><div>Data:<span id="dtime"></span></div></td></tr>

</table>
	
</body>
</html>
